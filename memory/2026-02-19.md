# 2026-02-19 (UTC) - MissionControl Production Deployment

> **Note:** This file uses UTC dates. Starting 2026-02-20, memory files use America/Denver dates.

## Major Accomplishment: MissionControl Live! üöÄ

Successfully deployed MissionControl to production at **https://rcurtis200.com**

## What We Deployed

**Infrastructure:**
- **PostgreSQL 17** - Migrated from SQLite to PostgreSQL for production
- Gunicorn application server (3 workers) on port 8001
- Nginx reverse proxy with SSL
- Let's Encrypt certificates (auto-renewal enabled)
- Systemd service for automatic startup

**Security Configuration:**
- Two-layer firewall (ufw + Hostinger network firewall)
- Ports 80/443 open to internet (web traffic only)
- SSH restricted to Tailscale network only (100.64.0.0/10)
- HTTPS with HSTS enabled (max-age=31536000)
- Security headers: X-Frame-Options, X-Content-Type-Options, etc.
- File permissions locked down (.env and db.sqlite3 set to 600)
- DEBUG=False in production

## PostgreSQL Migration

Successfully migrated MissionControl from SQLite to PostgreSQL 17:
- Installed PostgreSQL 17 on the VPS
- Created database `missioncontrol` with user `rcurtis200`
- Updated `settings.py` to use `dj_database_url` for flexible database configuration
- Configured DATABASE_URL in `.env` file
- PostgreSQL runs on localhost:5432 (not exposed to internet)
- Migrated data from SQLite to PostgreSQL

## Challenges Solved

1. **Port 8001 conflict:** Found a hidden user systemd service running Django dev server with `Restart=always`. Stopped and disabled it at `~/.config/systemd/user/missioncontrol.service`

2. **Certbot timeout:** Hostinger's network firewall was dropping all traffic. Added rules to allow ports 80/443 while keeping SSH Tailscale-only.

3. **DNS propagation:** Configured A records on Namecheap (rcurtis200.com + www ‚Üí 187.77.198.4). Public DNS servers resolved within 20 minutes.

4. **Security fixes:** Fixed world-readable permissions on .env (contained SECRET_KEY) and db.sqlite3 (user data). Changed both to 600.

## System Services Running

- `/etc/systemd/system/missioncontrol.service` - Gunicorn (system service)
- Nginx with site config at `/etc/nginx/sites-available/missioncontrol`
- OpenClaw gateway (user service)

## Configuration Files

- `.env` - Environment variables (SECRET_KEY, DEBUG=False, ALLOWED_HOSTS, DATABASE_URL)
- PostgreSQL database: `missioncontrol` (user: rcurtis200)
- `.env.postgres-backup` - Backup of PostgreSQL credentials
- Static files collected to `staticfiles/`
- Logs in `logs/gunicorn-{access,error}.log`

## Git Status

Working tree clean, 1 commit ahead of origin/main (not pushed yet)

## Future Improvements (Non-Urgent)

- Set up automated database backups (PostgreSQL)
- Rotate SECRET_KEY (was briefly world-readable before fix)
- Add favicon (currently 404s)
- Set up log rotation

## Teamwork Notes

Riley handled DNS configuration, Hostinger firewall adjustments, and sudo commands. I handled troubleshooting, configuration debugging, and security audits. Great partnership - we work well together. üèîÔ∏è üî±
